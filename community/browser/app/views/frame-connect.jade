div(ng-controller="AuthCtrl")
  .outer
    include partials/frame-common-actions
    .inner
      .view-result(ng-hide="password_change_required")
        article.guide
          div
            .row(ng-show="!auth_service.isAuthenticated()")
              .span4
                h3 Welcome to Neo4j!
                p.lead
                  | Before we start, please provide your username and password.
                  | The default values for username and password are 
                  b neo4j
                  /
                  b neo4j
              .span1
              .span5(ng-hide="auth_service.isAuthenticated()")
                .form
                  p
                    | Username
                    br
                    input(type='text', on-enter="focus", on-enter-target-id="connect_password", focus-on="1", ng-model="username", style="margin: 0")
                  p
                    | Password
                    br
                    input(id="connect_password", on-enter="click", on-enter-target-id="connect_button", type='password', ng-model="password", style="margin: 0")
                  p
                    button.btn(id="connect_button", ng-click="authenticate()", style="margin: 0") Connect
            .row(ng-if="auth_service.isAuthenticated() && !password_change_required && !auth_service.current_user")
              .span4
                h3 Connection to Neo4j
                p.lead
                  | Connected.
              .span1
              .span6
                p Connected to the Neo4j database (no authentication required).
            .row(ng-if="auth_service.isAuthenticated() && !password_change_required && auth_service.current_user")
              .span4
                h3 Connected to Neo4j
                p.lead
                  | Nice to meet you.
              .span1
              .span7(ng-hide="!auth_service.current_user")
                p
                ul.big.undecorated
                  li
                    span.center-tbl-left-col 
                      | Current user: 
                    code
                      | {{auth_service.current_user.username}}
                  li
                    span.center-tbl-left-col
                      | Authorization token: 
                    code
                      | {{auth_service.current_user.authorization_token}}
            .row(ng-show="password_change_required")
      .view-result(ng-show="password_change_required")
        include partials/frame-change-password
      .status-bar(ng-class='{error: error_text, loading: frame.isLoading}')
        div(ng-show="error_text")
          .icon-warning-sign
          {{error_text}}
